$(document).ready(function(){
	
	//the trow template
	let template = {
		getTemplate: function(sn, pt, st, ds){
			if((typeof(sn) !== 'undefined') && (typeof(pt) !== 'undefined') && (typeof(st) !== 'undefined') && (typeof(ds) !== 'undefined'))
				{
					return (
						`<tr>
							<td>${sn}</td>
							<td>${pt}</td>
							<td>${st}</td>
							<td>${ds}</td>
						</tr>`
					);
				}
			else if((typeof(sn) !== 'undefined') && (typeof(pt) !== 'undefined') && (typeof(st) !== 'undefined') && (typeof(ds) === 'undefined'))
				{
					return (
						`<tr>
							<td>${sn}</td>
							<td>${pt}</td>
							<td>${st}</td>
							<td>${'No Descriptions'}</td>
						</tr>`
					);
				}
			else
				{
					return null;
				}
		},
		getFormattedCurrency: function(amount){
			//instanciate the Internationalization API
			const formatter = new Intl.NumberFormat('en-US', {
					style: 'currency',
					currency: 'NGN',
					minimumFractionDigits: 2
				});
			
			//check if the  amount is a number
			if(typeof(amount) !== 'undefined' && typeof(parseInt(amount, 10)) === 'number')
				{
					//return the amoutn formatted
					return (formatter.format(amount));
				}
			else
				{
					console.error('InvalidAmountType: '+typeof(amount)+' must be an integer.');
				}
		}
	};

	//parser 
	let parser = function(template){
		//check if the template is empty
		if(typeof(template) !== 'undefined' || !Object.is(template, null))
			{
				$(document).find('.bs-service-item-bdy').append(template);
				return true;
			}
		else
			{
				console.error('InvalideTemplate Data');
				return false;
			}
	};
	
	
	
	//get the form data from the modal contex
	$(document).on('submit', '.add-service-card form#add-service-item-form', function(event){
		//prevent default submition
		event.preventDefault();
		let name = $(document).find('#serviceName').val();
		let price = $(document).find('#servicePrice').val();
		let type = $(document).find('#serviceType').val();
		let description = $(document).find('#serviceDescription').val();
		
		//call the template file 
		if(parser(template.getTemplate(name, template.getFormattedCurrency(price), type, description)))
			{
				$('body').infobox({
					type: 'sucess',
					tittle: 'Create Service',
					message: 'Service created successfully.',
					overlay: 'false',
					effect: 'off',
					vposition: 'top',
					hposition: 'bottom',
					timeout: '4000'
				});
				//reset the form
				document.getElementById('add-service-item-form').reset();
			}
		else
			{
				alert('something Went Wrong!!');
			}
		
		
	});
	
});